---
layout: post
title: 'Journaux JSVC uniquement lisibles par root '
categories:
- Administration
tags:
- Linux
- JSVC
- Tomcat
comments: []
---
<p>A l&rsquo;aide des options <code>-outfile</code> et <code>-errfile</code>, <a href="http://commons.apache.org/daemon/jsvc.html">JSVC</a> peut rediriger les sorties standards vers des fichiers.<br />
Les fichiers sont alors cr&eacute;&eacute;s avec le mode 600, quel que soit le <a href="http://fr.wikipedia.org/wiki/Umask"><code>umask</code></a>&nbsp;en vigueur.</p>
<p>Pour l&rsquo;&eacute;quipe de JSVC, l&rsquo;insensibilit&eacute; au <code>umask</code> n&rsquo;est pas un bogue mais une fonctionnalit&eacute; <!--more-->(<a href="https://issues.apache.org/jira/browse/DAEMON-178">source</a>)</p>
<p>Comme JSVC est souvent lanc&eacute; par <code>root</code>, les journaux se retrouvent lisibles uniquement par <code>root</code>, ce qui constitue une protection contre la fuite d'information par le biais des journaux.</p>
<p>Cette protection peut &ecirc;tre tr&egrave;s int&eacute;ressante pour un serveur de production. Mais dans le cas d&rsquo;un serveur de d&eacute;veloppement, elle est contre-productive.<br />
En effet, on a bien envie de laisser un acc&egrave;s en lecture aux d&eacute;veloppeurs afin qu'ils voient leur code s'ex&eacute;cuter!</p>
<p>Il n&rsquo;existe pas d&rsquo;option permettant de changer le mode des fichiers cr&eacute;&eacute;s.<br />
Cependant, il est possible de changer la valeur au moment de la compilation.<br />
[bash toolbar=false]./configure --with-java=/usr/java<br />
make EXTRA_CFLAGS="-DJSVC_UMASK=022"[/bash]<br />
Les fichiers seront alors cr&eacute;&eacute;s avec le mode 644.</p>
